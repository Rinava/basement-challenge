import clsx from "clsx";
import {motion, useSpring, useTransform} from "framer-motion";
import {ReactNode, useEffect} from "react";

interface HeaderProps {
  className?: string;
}

const Pill = ({children, className}: {children: ReactNode; className?: string}) => (
  <span
    className={clsx(
      "absolute bottom-2 md:bottom-5 xl:bottom-10 border-2 border-solid border-white px-3 md:px-6 xl:px-12 py-2 md:py-3 xl:py-6 rounded-[100%] leading-none text-[6px]  xl:text-20 md:text-16",
      className,
    )}
  >
    {children}
  </span>
);

const Header = ({className}: HeaderProps) => {
  const value1 = useSpring(0, {stiffness: 10, damping: 2, mass: 0.5, velocity: 1});
  const percentage1 = useTransform(value1, (value) => `${value}%`);

  const value2 = useSpring(0, {stiffness: 30, damping: 10, mass: 0.5});
  const percentage2 = useTransform(value2, (value) => `${value}%`);

  useEffect(() => {
    setTimeout(() => {
      value1.set(40);
      setTimeout(() => {
        value1.set(100);
      }, 1500);
      setTimeout(() => {
        value2.set(100);
      }, 2200);
    }, 1200);
  }, []);

  return (
    <header className={clsx("container relative flex flex-col items-center", className)}>
      <svg className="mb-3" viewBox="-2 0 1378 171" xmlns="http://www.w3.org/2000/svg">
        <title>Basement</title>
        <path
          d="M-.725 2.854v165.36h101.972c42.612 0 50.668-7.208 50.668-45.58v-4.24c0-24.804-8.056-32.012-36.676-33.92 23.956-2.544 30.74-8.692 30.74-34.132V45.89c0-36.252-6.996-43.036-44.732-43.036H-.725Zm44.52 128.048v-29.68h44.944c15.688 0 18.656 2.332 18.656 15.052 0 11.872-2.968 14.628-18.656 14.628H43.795Zm0-64.024v-27.56h42.824c12.508 0 14.84 2.332 14.84 13.992 0 11.236-2.332 13.568-14.84 13.568H43.795ZM290.451 2.854h-72.08l-57.028 165.36h48.76l9.116-32.224h66.356l10.388 32.224h50.88L290.451 2.854ZM229.607 99.95l23.108-63.176h1.696l21.2 63.176h-46.004ZM400.733 113.73v-2.12h-46.64v2.12c0 48.124 11.872 57.028 80.984 57.028 67.204 0 78.441-7.632 78.441-47.488 0-32.86-4.241-40.068-27.349-46.428-14.415-4.028-26.075-6.572-51.092-11.448-26.924-3.816-33.284-6.148-33.284-14.628 0-11.872 5.089-14.416 33.284-14.416 25.864 0 29.892 3.604 29.892 21.2v2.12h46.64v-2.12c0-48.336-12.084-57.24-76.532-57.24-62.751 0-77.804 9.964-77.804 46.004 0 34.98 5.3 42.612 33.072 49.184 22.26 5.088 30.528 6.996 44.732 9.328 26.077 5.088 33.92 7.42 33.92 16.536 0 11.236-5.724 13.356-33.92 13.356-28.62 0-34.344-2.544-34.344-20.988ZM530.306 2.854v165.36h135.468v-38.16h-90.948v-27.56h80.136v-36.04h-80.136v-25.44h90.948V2.854H530.306ZM729.201 168.214V45.254h1.272l24.38 122.96h59.36l27.984-122.96h1.272v122.96h44.52V2.854h-77.804l-24.804 127.2h-1.696l-21.412-127.2h-77.592v165.36h44.52ZM906.962 2.854v165.36h135.468v-38.16h-90.948v-27.56h80.138v-36.04h-80.138v-25.44h90.948V2.854H906.962ZM1061.34 168.214h42.4V66.454h1.27l62.33 101.76h50.88V2.854h-42.4v101.76h-1.27l-60.21-101.76h-53v165.36ZM1280.49 168.214h44.52V38.894h51.09V2.854h-146.28v36.04h50.67v129.32Z"
          stroke="#fff"
          strokeWidth="2"
        />
        <defs>
          <mask id="dry">
            <motion.rect fill="#fff" height="100%" style={{y: percentage1}} width="100%" x="0" />
          </mask>
        </defs>
        <path
          d="M-.725 2.854v165.36h101.972c42.612 0 50.668-7.208 50.668-45.58v-4.24c0-24.804-8.056-32.012-36.676-33.92 23.956-2.544 30.74-8.692 30.74-34.132V45.89c0-36.252-6.996-43.036-44.732-43.036H-.725Zm44.52 128.048v-29.68h44.944c15.688 0 18.656 2.332 18.656 15.052 0 11.872-2.968 14.628-18.656 14.628H43.795Zm0-64.024v-27.56h42.824c12.508 0 14.84 2.332 14.84 13.992 0 11.236-2.332 13.568-14.84 13.568H43.795ZM290.451 2.854h-72.08l-57.028 165.36h48.76l9.116-32.224h66.356l10.388 32.224h50.88L290.451 2.854ZM229.607 99.95l23.108-63.176h1.696l21.2 63.176h-46.004ZM400.733 113.73v-2.12h-46.64v2.12c0 48.124 11.872 57.028 80.984 57.028 67.204 0 78.441-7.632 78.441-47.488 0-32.86-4.241-40.068-27.349-46.428-14.415-4.028-26.075-6.572-51.092-11.448-26.924-3.816-33.284-6.148-33.284-14.628 0-11.872 5.089-14.416 33.284-14.416 25.864 0 29.892 3.604 29.892 21.2v2.12h46.64v-2.12c0-48.336-12.084-57.24-76.532-57.24-62.751 0-77.804 9.964-77.804 46.004 0 34.98 5.3 42.612 33.072 49.184 22.26 5.088 30.528 6.996 44.732 9.328 26.077 5.088 33.92 7.42 33.92 16.536 0 11.236-5.724 13.356-33.92 13.356-28.62 0-34.344-2.544-34.344-20.988ZM530.306 2.854v165.36h135.468v-38.16h-90.948v-27.56h80.136v-36.04h-80.136v-25.44h90.948V2.854H530.306ZM729.201 168.214V45.254h1.272l24.38 122.96h59.36l27.984-122.96h1.272v122.96h44.52V2.854h-77.804l-24.804 127.2h-1.696l-21.412-127.2h-77.592v165.36h44.52ZM906.962 2.854v165.36h135.468v-38.16h-90.948v-27.56h80.138v-36.04h-80.138v-25.44h90.948V2.854H906.962ZM1061.34 168.214h42.4V66.454h1.27l62.33 101.76h50.88V2.854h-42.4v101.76h-1.27l-60.21-101.76h-53v165.36ZM1280.49 168.214h44.52V38.894h51.09V2.854h-146.28v36.04h50.67v129.32Z"
          fill="#fff"
          mask="url(#dry)"
        />
      </svg>

      <svg className="w-[68%] mx-auto" viewBox="0 0 230 45" xmlns="http://www.w3.org/2000/svg">
        <title>Supply</title>
        <defs>
          <mask id="water">
            <motion.rect fill="#fff" style={{height: percentage2}} width="100%" x="0" y="0" />
          </mask>
        </defs>
        <path
          d="M12.969 29.976v-.546H.964v.546c0 12.387 3.056 14.679 20.845 14.679 17.298 0 20.19-1.965 20.19-12.224 0-8.457-1.091-10.313-7.039-11.95-3.71-1.037-6.712-1.692-13.151-2.947-6.93-.982-8.567-1.582-8.567-3.765 0-3.056 1.31-3.71 8.567-3.71 6.657 0 7.694.927 7.694 5.456v.546h12.005v-.546C41.508 3.074 38.398.782 21.81.782 5.657.782 1.783 3.347 1.783 12.623c0 9.004 1.364 10.969 8.512 12.66 5.73 1.31 7.858 1.8 11.514 2.401 6.712 1.31 8.731 1.91 8.731 4.256 0 2.893-1.473 3.438-8.731 3.438-7.367 0-8.84-.655-8.84-5.402ZM81.913 26.538V1.437H70.454v25.101c0 7.476-1.146 8.84-7.421 8.84-6.276 0-7.421-1.364-7.421-8.84V1.437h-11.46v25.101c0 15.28 2.947 18.117 18.88 18.117 15.935 0 18.881-2.838 18.881-18.117ZM84.65 1.437V44h11.46V32.813h13.86c10.368-.545 13.206-3.71 13.206-14.733v-2.183c0-11.35-3.056-14.46-14.188-14.46H84.65ZM96.11 22.99V10.713h9.931c4.802 0 5.675.983 5.675 6.33 0 5.02-.873 5.948-5.675 5.948H96.11ZM125.095 1.437V44h11.46V32.813h13.86c10.368-.545 13.206-3.71 13.206-14.733v-2.183c0-11.35-3.056-14.46-14.188-14.46h-24.338Zm11.46 21.554V10.713h9.931c4.802 0 5.675.983 5.675 6.33 0 5.02-.873 5.948-5.675 5.948h-9.931ZM165.54 1.437V44h30.504v-9.822H177V1.437h-11.46ZM229.838 1.437h-12.55l-8.076 15.825h-.328l-7.912-15.825h-13.097l15.389 27.393V44h11.459V28.83l15.115-27.393Z"
          stroke="#fff"
          strokeWidth="0.5"
        />
        <path
          d="M12.969 29.976v-.546H.964v.546c0 12.387 3.056 14.679 20.845 14.679 17.298 0 20.19-1.965 20.19-12.224 0-8.457-1.091-10.313-7.039-11.95-3.71-1.037-6.712-1.692-13.151-2.947-6.93-.982-8.567-1.582-8.567-3.765 0-3.056 1.31-3.71 8.567-3.71 6.657 0 7.694.927 7.694 5.456v.546h12.005v-.546C41.508 3.074 38.398.782 21.81.782 5.657.782 1.783 3.347 1.783 12.623c0 9.004 1.364 10.969 8.512 12.66 5.73 1.31 7.858 1.8 11.514 2.401 6.712 1.31 8.731 1.91 8.731 4.256 0 2.893-1.473 3.438-8.731 3.438-7.367 0-8.84-.655-8.84-5.402ZM81.913 26.538V1.437H70.454v25.101c0 7.476-1.146 8.84-7.421 8.84-6.276 0-7.421-1.364-7.421-8.84V1.437h-11.46v25.101c0 15.28 2.947 18.117 18.88 18.117 15.935 0 18.881-2.838 18.881-18.117ZM84.65 1.437V44h11.46V32.813h13.86c10.368-.545 13.206-3.71 13.206-14.733v-2.183c0-11.35-3.056-14.46-14.188-14.46H84.65ZM96.11 22.99V10.713h9.931c4.802 0 5.675.983 5.675 6.33 0 5.02-.873 5.948-5.675 5.948H96.11ZM125.095 1.437V44h11.46V32.813h13.86c10.368-.545 13.206-3.71 13.206-14.733v-2.183c0-11.35-3.056-14.46-14.188-14.46h-24.338Zm11.46 21.554V10.713h9.931c4.802 0 5.675.983 5.675 6.33 0 5.02-.873 5.948-5.675 5.948h-9.931ZM165.54 1.437V44h30.504v-9.822H177V1.437h-11.46ZM229.838 1.437h-12.55l-8.076 15.825h-.328l-7.912-15.825h-13.097l15.389 27.393V44h11.459V28.83l15.115-27.393Z"
          fill="#fff"
          mask="url(#water)"
          strokeWidth="0.5"
        />
      </svg>

      <Pill className="left-4 md:left-14">EST</Pill>
      <Pill className="right-4 md:right-14">2K19</Pill>
    </header>
  );
};

export default Header;
